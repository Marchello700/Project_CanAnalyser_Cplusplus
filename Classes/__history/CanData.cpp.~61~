#include "CanData.h"
#include <sstream>

int TCanDataFrame::getId()
{
	return m_id;
};

void TCanDataFrame::setId(int value)
{
	m_id = value;
}

int TCanDataFrame::getDlc()
{
	return m_dlc;
}

void TCanDataFrame::setDlc(int value)
{
	m_dlc = value;
}

const int * TCanDataFrame::getData()
{
	return m_data;
};

void TCanDataFrame::setData(int value[], int length)
{
	for (int i = 0; i < std::min(length,8); i++) {
		m_data[i] = value[i];
	}
};

CanVersion TCanDataFrame::getVersion()
{
	return m_version;
}

void TCanDataFrame::setVersion(CanVersion value)
{
	m_version = value;
}

__fastcall UnicodeString TCanDataFrame::ToString()
{
	UnicodeString result = "";
	std::ostringstream ss;
	if (m_version) {
		ss.width(8);
	}
	else {
		ss.width(3);
	}
	ss << std::hex << this->m_id << " -";
//	std::string str = ss.str();
//	result += str.c_str();
//	result += " -";
	for (int i = 0; i < m_dlc; i++) {
		ss.width(1);
		ss << " ";
		ss.width(2);
		ss << std::hex << this->m_data[i] ;
//		str = ss.str();
//        result += " ";
//		result += str.c_str();
	}
    str = ss.str();
	result = str.c_str();
    return result;
}
